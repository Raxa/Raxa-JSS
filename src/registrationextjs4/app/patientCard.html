<!--
  Copyright 2012, Raxa
 
  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at
 
      http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
 
 This page acts as print preview for patient registration card

-->
<html>
    <head>
        <title>Patient Registration Card</title>
    </head>
    
    <body>
        <form>
            <input type="button" value="Continue to Print" id="printButton" onClick="hideAndPrint();"
            align="right">
        </form>
        <table border="1" cellpadding="1" cellspacing="1" style="width: 500px; ">
            <tbody>
                <tr>
                    <td>
                        <p style="text-align: center; ">&nbsp;</p>
                        <p style="text-align: center; ">&nbsp;</p>
                        <p style="text-align: center; ">
                            <strong>Information</strong>
                        </p>
                        <ul>
                            <li>Please bring the card next time you visit JSS</li>
                            <li>Take the medicine as per instructions of Doctor.</li>
                            <li>Time of Registration: 8.30 am to 12:00 pm</li>
                            <li>OPD Days: Monday, Wednesday and Friday</li>
                            <li>Weekly holiday: Sunday</li>
                        </ul>
                        <p>&nbsp;</p>
                        <table border="0" cellpadding="1" cellspacing="1" style="width: 500px; ">
                            <tbody>
                                <tr>
                                    <td style="text-align: center; ">
                                        <strong>Warning</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: center; ">Smoking can cause cancer, heart diseases and asthama.</td>
                                </tr>
                            </tbody>
                        </table>
                        <p style="text-align: center;">&nbsp;</p>
                        <p style="text-align: center;">&nbsp;</p>
                    </td>
                    <td>&nbsp;&nbsp;</td>
                    <td>
                        <table align="center" style="width: 500px; align:center;" >
                            <td>
                                <p style="text-align: center; ">
                                    <img src="../../resources/img/jss-icon.png" style="float: center; width: 100px; height: 100px; "
                                    />
                                </p>
                            </td>
                            <td>
                                <h2 style="text-align: center; ">Jan Swasthya Sahyog <br> Ganiyaari,Bilaspur </h2>
                      
                            </td>
                             <td>
                                <p style="text-align: center; ">
                                    <img style="float: center; width: 80px; height: 80px; " id="GenderIcon"/>
                                </p>
                            </td>
                        </table>
                        <table align="center" style="padding:20px 20px 20px 20px; ">
                            <tbody>
                                <tr>   <h3 style="text-align: center; "> Registration Card </h3> </tr>
                                <tr>
                                    <td width="150px">Date:</td>
                                    <td>
                                        <input type="text" id="Date" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Registration:</td>
                                    <td>
                                        <input type="text" id="Id" readonly="true" style="border-width: 0px 0px 0px 0px;" size=30>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Name:</td>
                                    <td>
                                        <input type="text" id="Name" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Age:</td>
                                    <td>
                                        <input type="text" id="Age" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Gender:</td>
                                    <td>
                                        <input type="text" id="Gender" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Weight:</td>
                                    <td>
                                        <input type="text" id="Weight" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Village</td>
                                    <td>
                                        <input type="text" id="Village" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Tehsil:</td>
                                    <td>
                                        <input type="text" id="Tehsil" readonly="true" style="border-width: 0px 0px 0px 0px;">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
        <script>
 			//Retrieve information about last selected Patient from localStorage       
            var selectedPatient = JSON.parse(localStorage.getItem('selectedPatient'));
            var selectedPatientAttributes = ['Name','Id','Age','Gender','Weight','Village','Tehsil'];
			for(var i=0; i<selectedPatientAttributes.length; i++)
			{
				if(selectedPatient[selectedPatientAttributes[i]])
				{	
					//Check if old Patient Identifier is available or not
					if(selectedPatientAttributes[i] === 'Id' && selectedPatient.oldPatientIdentifier &&  selectedPatient.oldPatientIdentifier != '-')
					{ 
						document.getElementById(selectedPatientAttributes[i]).value= selectedPatient[selectedPatientAttributes[i]] +' (Old: '+ selectedPatient.oldPatientIdentifier+ ')';
					}			
					else	
					{				
						document.getElementById(selectedPatientAttributes[i]).value = selectedPatient[selectedPatientAttributes[i]];
					}
				}
				else
				{
					document.getElementById(selectedPatientAttributes[i]).value = '-';
				}
			}
           var currentDate = new Date();
           document.getElementById("Date").value = currentDate.getDate() + '/' + currentDate.getMonth() + '/' + currentDate.getFullYear();
	 	
	 	  //Sets Icon on patient registrtion card as per patient's gender
		   if(selectedPatient.Gender == "Female")
		   {
		   			document.getElementById('GenderIcon').src="../../resources/img/female.png" 
		   }
		   if(selectedPatient.Gender == "Male")
		   {
		   			document.getElementById('GenderIcon').src="../../resources/img/male.png" 
		   }
		   	
            //Print Button is hidden and then window is printed.
            function hideAndPrint() {
                document.getElementById("printButton").style.visibility = 'hidden';
                window.print();
            }
        </script>
    </body>

</html>
